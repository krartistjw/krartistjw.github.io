{"title":"[ SAMPLE ] Host Overview Dashboard","description":"","widgets":[{"id":7347844842063064,"definition":{"title":"Host Uptime (Red : 5분이내 restart 서버)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"avg:system.uptime{*} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","conditional_formats":[{"palette":"white_on_green","value":300,"comparator":">"},{"palette":"white_on_red","value":300,"comparator":"<="}],"limit":{"count":500,"order":"asc"}}]}]}},{"id":4661348254421602,"definition":{"title":"모니터링되고 있는 서버 수 (Agent running)","type":"query_value","requests":[{"conditional_formats":[{"palette":"white_on_green","comparator":">","value":1}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.agent.running{$env,$project,$category}","aggregator":"max"}]}],"autoscale":true,"precision":0}},{"id":4952286846199662,"definition":{"title":"CPU/Mem/Net/Disk 특이사항","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"avg:system.cpu.user{$env,$project,$category} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:system.cpu.system{$env,$project,$category} by {host}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:system.mem.pct_usable{$env,$project,$category} by {host}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"avg:system.net.bytes_rcvd{$env,$project,$category} by {host}","data_source":"metrics","name":"query4","aggregator":"avg"},{"query":"avg:system.net.bytes_sent{$env,$project,$category} by {host}","data_source":"metrics","name":"query5","aggregator":"avg"},{"query":"sum:system.disk.free{$env,$project,$category} by {host}","data_source":"metrics","name":"query6","aggregator":"last"}],"formulas":[{"alias":"cpu.user","conditional_formats":[{"palette":"white_on_green","value":40,"comparator":"<"},{"palette":"white_on_yellow","value":40,"comparator":">="},{"palette":"white_on_red","value":60,"comparator":">="}],"limit":{"count":100,"order":"desc"},"formula":"query1"},{"alias":"cpu.system","conditional_formats":[{"palette":"white_on_green","value":40,"comparator":"<"},{"palette":"white_on_yellow","value":40,"comparator":">="},{"palette":"white_on_red","value":60,"comparator":">="}],"formula":"query2"},{"alias":"mem.usable","conditional_formats":[{"palette":"white_on_green","value":0.3,"comparator":">"},{"palette":"white_on_yellow","value":0.3,"comparator":"<="},{"palette":"white_on_red","value":0.1,"comparator":"<="}],"formula":"query3"},{"alias":"net.rcvd","conditional_formats":[{"palette":"white_on_green","value":5000000,"comparator":"<"},{"palette":"white_on_yellow","value":10000000,"comparator":"<"},{"palette":"white_on_red","value":10000000,"comparator":">="}],"formula":"query4"},{"alias":"net.sent","conditional_formats":[{"palette":"white_on_green","value":5000000,"comparator":"<"},{"palette":"white_on_yellow","value":10000000,"comparator":"<"},{"palette":"white_on_red","value":10000000,"comparator":">="}],"formula":"query5"},{"alias":"disk.free","conditional_formats":[{"palette":"white_on_green","value":5000000000,"comparator":">"},{"palette":"white_on_yellow","value":5000000000,"comparator":"<="},{"palette":"white_on_red","value":3000000000,"comparator":"<="}],"formula":"query6"}]}]}},{"id":6849378465475794,"definition":{"title":"CPU","type":"group","layout_type":"ordered","widgets":[{"id":472967750620648,"definition":{"title":"CPU Usage Top 10 Host","type":"toplist","requests":[{"conditional_formats":[{"palette":"white_on_yellow","comparator":">","value":70},{"palette":"white_on_red","comparator":">","value":80}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.cpu.user{$env,$project,$category} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"avg:system.cpu.system{$env,$project,$category} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query1 + query2","limit":{"count":10,"order":"desc"}}]}]}},{"id":7040592559218536,"definition":{"title":"CPU Usage HostMap ","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.idle{$env,$category} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["service"],"scope":["$env"],"style":{"palette":"green_to_orange","palette_flip":true,"fill_min":"0","fill_max":"100"}}},{"id":1069666239235062,"definition":{"title":"CPU Usage sum (user+system)","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.cpu.user{$env,$project,$category} by {host}"},{"data_source":"metrics","name":"query2","query":"avg:system.cpu.system{$env,$project,$category} by {host}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"},"markers":[{"label":"y = 80","value":"y = 80","display_type":"error dashed"}]}},{"id":5001909772970260,"definition":{"title":"CPU Usage ( 100- idle )","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"100 - query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.cpu.idle{$env,$project,$category} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 10","value":"y = 10","display_type":"error solid"}]}},{"id":6344309984456294,"definition":{"title":"CPU User","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:system.cpu.user{$env,$project,$category} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"}}},{"id":1815093439851442,"definition":{"title":"CPU System","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:system.cpu.system{$env,$project,$category} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"}}},{"id":4892174289470062,"definition":{"title":"CPU IOWait","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:system.cpu.iowait{$env,$project,$category} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"}}},{"id":1506052797246484,"definition":{"title":"CPU Stolen","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"avg:system.cpu.stolen{$env,$project,$category} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"}}}]}},{"id":7365159582841228,"definition":{"title":"Memory","type":"group","layout_type":"ordered","widgets":[{"id":1187227796387406,"definition":{"title":"호스트별 가용 메모리 Top10 (낮은 순)","type":"toplist","requests":[{"conditional_formats":[{"palette":"white_on_green","comparator":">","value":20},{"palette":"white_on_yellow","comparator":">","value":10},{"palette":"white_on_red","comparator":"<=","value":10}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.mem.usable{$env,$project,$category} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"avg:system.mem.total{$env,$project,$category} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query1 / query2 * 100","limit":{"count":10,"order":"asc"}}]}]}},{"id":1591148717505040,"definition":{"title":"호스트별 가용 메모리","type":"hostmap","requests":{"fill":{"q":"avg:system.mem.pct_usable{$env,$category} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["service"],"scope":["$env"],"style":{"palette":"green_to_orange","palette_flip":true,"fill_min":"0","fill_max":"1"}}},{"id":5749971003298350,"definition":{"title":"system.mem 사용 비율(used/total)","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.mem.used{$project,$category} by {host}"},{"data_source":"metrics","name":"query2","query":"avg:system.mem.total{$project,$category} by {host}"}],"formulas":[{"formula":"query1 / query2 * 100"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"}}},{"id":6089257951358826,"definition":{"title":"사용중인 메모리 비율 (100에 가까울 수록 사용량이 높음)","show_legend":true,"legend_size":"0","legend_layout":"auto","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.mem.pct_usable{$env,$project,$category} by {host}"}],"formulas":[{"formula":"(1 - query1) * 100"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 90","value":"y = 90","display_type":"error dashed"}]}}]}},{"id":2610106973435550,"definition":{"title":"Network","type":"group","layout_type":"ordered","widgets":[{"id":433058881861698,"definition":{"title":"호스트별 Network 총 수신량(SUM)","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:system.net.bytes_rcvd{$env,$project,$category}","aggregator":"avg"}]}],"autoscale":true,"precision":2}},{"id":8908809368624082,"definition":{"title":"호스트별 네트워크 수신","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.net.bytes_rcvd{$env,$project,$category} by {host,device}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 10000000","value":"y = 10000000","display_type":"error dashed"}]}},{"id":6339284418835588,"definition":{"title":"호스트별 네트워크 총 송신량(SUM)","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:system.net.bytes_sent{$env,$project,$category}","aggregator":"avg"}]}],"autoscale":true,"precision":2}},{"id":6347022635333430,"definition":{"title":"호스트별 네트워크 송신","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.net.bytes_sent{$env,$project,$category} by {host,device}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 10000000","value":"y = 10000000","display_type":"error dashed"}]}}]}},{"id":3431680014508342,"definition":{"title":"Disk","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7566739715778928,"definition":{"title":"Disk Usage(%)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1 / query2 * 100","cell_display_mode":"bar","limit":{"count":500,"order":"desc"},"conditional_formats":[{"palette":"white_on_red","comparator":">=","value":90},{"palette":"white_on_yellow","comparator":">=","value":80},{"palette":"white_on_green","comparator":"<","value":80}]}],"conditional_formats":[{"palette":"white_on_red","comparator":">=","value":90},{"palette":"white_on_yellow","comparator":">=","value":80},{"palette":"white_on_green","comparator":"<","value":80}],"response_format":"scalar","queries":[{"query":"avg:system.disk.used{*} by {device,host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:system.disk.total{*} by {device,host}","data_source":"metrics","name":"query2","aggregator":"avg"}]}]}},{"id":8632242194208140,"definition":{"title":"Disk Free","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:system.disk.free{*} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]}},{"id":5275953787304146,"definition":{"title":"Write Time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.disk.write_time{*} by {host}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]}},{"id":4345365810244216,"definition":{"title":"Read Time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.disk.read_time{*} by {host}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]}}]}}],"template_variables":[{"name":"env","prefix":"env","available_values":[],"default":"*"},{"name":"project","prefix":"project","available_values":[],"default":"*"},{"name":"category","prefix":"category","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"auto","tags":[]}